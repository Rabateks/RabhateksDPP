<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mango DPP ‚Äî Chemicals/Dyes Management</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
        }

        .header {
            background-color: #ffffff;
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left { display: flex; align-items: center; gap: 15px; }

        /* Logo switched to external image to match index.html */
        .logo { width: 50px; height: 50px; object-fit: contain; border-radius: 50%; display:block; }

        .header-text h1 { color: #005530; font-size: 24px; font-weight: 700; }
        .header-text .subtitle { color: #666; font-size: 14px; }
        .dpp-title { color: #f9ba00; font-weight: 600; }

        .back-to-dashboard {
            background-color: #005530; color: #fff; padding: 10px 20px; border: none; border-radius: 6px;
            font-weight: 600; cursor: pointer; transition: all .3s ease; text-decoration: none; display: flex;
            align-items: center; gap: 8px; font-size: 14px;
        }
        .back-to-dashboard:hover { background-color: #004429; transform: translateY(-1px); }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        .form-section { background-color: #fff; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,.08); border: 1px solid #f0f0f0; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; }
        label { font-weight: 600; margin-bottom: 5px; color: #333; font-size: 14px; }
        input, select, textarea { padding: 12px; border: 1px solid #ddd; border-radius: 6px; font-size: 14px; background-color: #fff; transition: border-color .3s ease; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #005530; box-shadow: 0 0 0 3px rgba(0,85,48,.1); }

        .tags-container { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .tag { background-color: #005530; color: #fff; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 500; display: flex; align-items: center; gap: 5px; }
        .tag .remove { cursor: pointer; font-weight: bold; }

        .button-group { display: flex; gap: 10px; margin-top: 20px; }
        .btn { padding: 12px 24px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: all .3s ease; font-size: 14px; }
        .btn-primary { background-color: #005530; color: #fff; }
        .btn-primary:hover { background-color: #004429; transform: translateY(-1px); }
        .btn-secondary { background-color: #666; color: #fff; }
        .btn-secondary:hover { background-color: #555; }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background-color: #fff; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,.08); border: 1px solid #f0f0f0; text-align: center; }
        .stat-icon { font-size: 24px; margin-bottom: 10px; }
        .stat-value { font-size: 28px; font-weight: bold; margin-bottom: 5px; }
        .stat-label { color: #666; font-size: 14px; }

        .chemicals-list { background-color: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,.08); border: 1px solid #f0f0f0; }
        .chemical-item { padding: 20px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; background-color: #f9ba00; color: #333; margin-bottom: 8px; border-radius: 8px; }
        .chemical-info h3 { font-size: 16px; font-weight: 600; margin-bottom: 5px; }
        .chemical-details { font-size: 14px; color: #666; }
        .chemical-actions { display: flex; gap: 10px; }

        .btn-small { padding: 6px 12px; font-size: 12px; border-radius: 4px; }
        .btn-edit { background-color: #02154e; color: #fff; }
        .btn-details { background-color: #666; color: #fff; }
        .btn-delete { background-color: #D51635; color: #fff; }

        .chemical-type { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 10px; }
        .reactive-dye { background-color: #005530; color: #fff; }
        .acid-dye { background-color: #f9ba00; color: #333; }
        .disperse-dye { background-color: #02154e; color: #fff; }
        .auxiliary { background-color: #666; color: #fff; }
        .finishing-chemical { background-color: #D51635; color: #fff; }

        .helper-text { font-size: 12px; color: #666; margin-top: 5px; }

        .chart-container { background-color: #fff; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 2px 10px rgba(0,0,0,.08); border: 1px solid #f0f0f0; }
        .chart-title { font-size: 18px; font-weight: 600; color: #333; margin-bottom: 20px; }

        .safety-level { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 10px; }
        .eco-certified { background-color: #005530; color: #fff; }
        .low-impact { background-color: #f9ba00; color: #333; }
        .standard-chemical { background-color: #666; color: #fff; }
        .restricted { background-color: #D51635; color: #fff; }

        .compliance-indicator { display: inline-block; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; margin-left: 10px; }
        .oeko-tex { background-color: #005530; color: #fff; }
        .zdhc-approved { background-color: #02154e; color: #fff; }
        .reach-compliant { background-color: #f9ba00; color: #333; }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .form-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .chemical-item { flex-direction: column; align-items: flex-start; gap: 15px; }
            .header { flex-direction: column; gap: 15px; }
            .header-left { justify-content: center; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <!-- External logo path to align with index.html -->
            <img class="logo" src="assets/img/assets/img/logo.png" alt="Mango DPP Logo" />
            <div class="header-text">
                <h1>Mango <span class="dpp-title">DPP</span> ‚Äî Chemicals/Dyes Management</h1>
                <p class="subtitle">Digital Product Passport ‚Ä¢ Chemical Tracking ‚Ä¢ Environmental Compliance ‚Ä¢ Safety Management</p>
            </div>
        </div>
        <!-- Make the back link consistent with index.html behavior -->
        <a href="index.html" class="back-to-dashboard" onclick="return goHome(event)">‚Üê Back to Main Dashboard</a>
    </header>

    <div class="container">
        <!-- Statistics Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üß™</div>
                <div class="stat-value" style="color: #005530;">287</div>
                <div class="stat-label">Active Chemicals</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-value" style="color: #005530;">94.2%</div>
                <div class="stat-label">Compliance Rate</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üíß</div>
                <div class="stat-value" style="color: #f9ba00;">12.5t</div>
                <div class="stat-label">Monthly Usage</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-value" style="color: #02154e;">‚Ç¨67K</div>
                <div class="stat-label">Monthly Chemical Cost</div>
            </div>
        </div>

        <!-- Chemical Entry Form -->
        <div class="form-section">
            <h2 style="color: #333; margin-bottom: 20px;">Add New Chemical/Dye</h2>

            <div class="form-grid">
                <div class="form-group">
                    <label for="chemical-id">Chemical ID</label>
                    <input type="text" id="chemical-id" placeholder="e.g., CHM-24567" />
                </div>
                <div class="form-group">
                    <label for="chemical-name">Chemical Name</label>
                    <input type="text" id="chemical-name" placeholder="e.g., Reactive Red 195" />
                </div>
                <div class="form-group">
                    <label for="cas-number">CAS Number</label>
                    <input type="text" id="cas-number" placeholder="e.g., 12345-67-8" />
                </div>
                <div class="form-group">
                    <label for="chemical-type">Chemical Type</label>
                    <select id="chemical-type">
                        <option value="">Select Type</option>
                        <option value="Reactive Dye">Reactive Dye</option>
                        <option value="Acid Dye">Acid Dye</option>
                        <option value="Disperse Dye">Disperse Dye</option>
                        <option value="Direct Dye">Direct Dye</option>
                        <option value="Auxiliary Chemical">Auxiliary Chemical</option>
                        <option value="Finishing Chemical">Finishing Chemical</option>
                        <option value="Pretreatment Chemical">Pretreatment Chemical</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="supplier">Supplier</label>
                    <input type="text" id="supplier" placeholder="e.g., Archroma Switzerland" />
                </div>
                <div class="form-group">
                    <label for="concentration">Concentration (%)</label>
                    <input type="number" step="0.1" id="concentration" placeholder="e.g., 85.5" />
                </div>
                <div class="form-group">
                    <label for="monthly-usage">Monthly Usage (kg)</label>
                    <input type="number" step="0.1" id="monthly-usage" placeholder="e.g., 250.5" />
                </div>
                <div class="form-group">
                    <label for="unit-cost">Unit Cost (‚Ç¨/kg)</label>
                    <input type="number" step="0.01" id="unit-cost" placeholder="e.g., 12.50" />
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="safety-level">Safety Level</label>
                    <select id="safety-level">
                        <option value="">Select Level</option>
                        <option value="Eco-Certified">Eco-Certified</option>
                        <option value="Low Impact">Low Impact</option>
                        <option value="Standard Chemical">Standard Chemical</option>
                        <option value="Restricted Use">Restricted Use</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="environmental-impact">Environmental Impact</label>
                    <select id="environmental-impact">
                        <option value="">Select Impact</option>
                        <option value="Biodegradable">Biodegradable</option>
                        <option value="Low Toxicity">Low Toxicity</option>
                        <option value="Moderate Impact">Moderate Impact</option>
                        <option value="High Impact">High Impact</option>
                        <option value="Hazardous">Hazardous</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="storage-temp">Storage Temperature (¬∞C)</label>
                    <input type="text" id="storage-temp" placeholder="e.g., 15-25" />
                </div>
                <div class="form-group">
                    <label for="shelf-life">Shelf Life (months)</label>
                    <input type="number" id="shelf-life" placeholder="e.g., 24" />
                </div>
                <div class="form-group">
                    <label for="ph-level">pH Level</label>
                    <input type="number" step="0.1" id="ph-level" placeholder="e.g., 7.2" />
                </div>
                <div class="form-group">
                    <label for="application-process">Application Process</label>
                    <select id="application-process">
                        <option value="">Select Process</option>
                        <option value="Exhaust Dyeing">Exhaust Dyeing</option>
                        <option value="Continuous Dyeing">Continuous Dyeing</option>
                        <option value="Printing">Printing</option>
                        <option value="Finishing">Finishing</option>
                        <option value="Pretreatment">Pretreatment</option>
                        <option value="Washing">Washing</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="waste-treatment">Waste Treatment Required</label>
                    <select id="waste-treatment">
                        <option value="Standard">Standard Treatment</option>
                        <option value="Advanced">Advanced Treatment</option>
                        <option value="Special Handling">Special Handling</option>
                        <option value="Hazardous Waste">Hazardous Waste</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="batch-number">Current Batch Number</label>
                    <input type="text" id="batch-number" placeholder="e.g., BTH-2024-001" />
                </div>
            </div>

            <div class="form-group">
                <label for="chemical-notes">Chemical Notes & Safety Instructions</label>
                <textarea id="chemical-notes" rows="3" placeholder="Safety precautions, handling instructions, storage requirements, or compliance notes..."></textarea>
            </div>

            <div class="tags-container" id="compliance-tags">
                <div class="tag">OEKO-TEX Approved <span class="remove">√ó</span></div>
                <div class="tag">ZDHC Level 3 <span class="remove">√ó</span></div>
                <div class="tag">REACH Compliant <span class="remove">√ó</span></div>
            </div>
            <div class="helper-text">Compliance certifications and safety standards</div>

            <div class="button-group">
                <button class="btn btn-primary" id="add-btn">Add Chemical/Dye</button>
                <button class="btn btn-secondary" id="clear-btn">Clear Form</button>
            </div>
        </div>

        <!-- Chemicals List -->
        <div class="chemicals-list">
            <div class="chemical-item">
                <div class="chemical-info">
                    <h3>CHM-24567 ‚Ä¢ Reactive Red 195 ‚Ä¢ CAS: 12345-67-8</h3>
                    <div class="chemical-details">
                        Supplier: Archroma Switzerland | 85.5% | 250kg/month | ‚Ç¨12.50/kg | BTH-2024-001
                        <span class="chemical-type reactive-dye">Reactive Dye</span>
                        <span class="safety-level eco-certified">Eco-Certified</span>
                        <span class="compliance-indicator oeko-tex">OEKO-TEX</span>
                    </div>
                </div>
                <div class="chemical-actions">
                    <button class="btn btn-small btn-edit">üìù Edit</button>
                    <button class="btn btn-small btn-details">üëÅÔ∏è SDS</button>
                    <button class="btn btn-small btn-delete">üóëÔ∏è Delete</button>
                </div>
            </div>

            <div class="chemical-item">
                <div class="chemical-info">
                    <h3>CHM-24568 ‚Ä¢ Sodium Carbonate ‚Ä¢ CAS: 497-19-8</h3>
                    <div class="chemical-details">
                        Supplier: Solvay Chemicals | 99.2% | 1,200kg/month | ‚Ç¨0.85/kg | BTH-2024-002
                        <span class="chemical-type auxiliary">Auxiliary Chemical</span>
                        <span class="safety-level low-impact">Low Impact</span>
                        <span class="compliance-indicator reach-compliant">REACH</span>
                    </div>
                </div>
                <div class="chemical-actions">
                    <button class="btn btn-small btn-edit">üìù Edit</button>
                    <button class="btn btn-small btn-details">üëÅÔ∏è SDS</button>
                    <button class="btn btn-small btn-delete">üóëÔ∏è Delete</button>
                </div>
            </div>

            <div class="chemical-item">
                <div class="chemical-info">
                    <h3>CHM-24569 ‚Ä¢ Disperse Blue 79 ‚Ä¢ CAS: 3618-72-2</h3>
                    <div class="chemical-details">
                        Supplier: Huntsman Corporation | 95.0% | 180kg/month | ‚Ç¨18.75/kg | BTH-2024-003
                        <span class="chemical-type disperse-dye">Disperse Dye</span>
                        <span class="safety-level standard-chemical">Standard</span>
                        <span class="compliance-indicator zdhc-approved">ZDHC Level 3</span>
                    </div>
                </div>
                <div class="chemical-actions">
                    <button class="btn btn-small btn-edit">üìù Edit</button>
                    <button class="btn btn-small btn-details">üëÅÔ∏è SDS</button>
                    <button class="btn btn-small btn-delete">üóëÔ∏è Delete</button>
                </div>
            </div>

            <div class="chemical-item">
                <div class="chemical-info">
                    <h3>CHM-24570 ‚Ä¢ Softener Agent SF-120 ‚Ä¢ CAS: 68584-22-5</h3>
                    <div class="chemical-details">
                        Supplier: CHT Germany | 30.0% | 450kg/month | ‚Ç¨3.20/kg | BTH-2024-004
                        <span class="chemical-type finishing-chemical">Finishing Chemical</span>
                        <span class="safety-level low-impact">Low Impact</span>
                        <span class="compliance-indicator oeko-tex">OEKO-TEX</span>
                    </div>
                </div>
                <div class="chemical-actions">
                    <button class="btn btn-small btn-edit">üìù Edit</button>
                    <button class="btn btn-small btn-details">üëÅÔ∏è SDS</button>
                    <button class="btn btn-small btn-delete">üóëÔ∏è Delete</button>
                </div>
            </div>

            <div class="chemical-item">
                <div class="chemical-info">
                    <h3>CHM-24571 ‚Ä¢ Acid Yellow 17 ‚Ä¢ CAS: 6359-98-4</h3>
                    <div class="chemical-details">
                        Supplier: DyStar Singapore | 80.0% | 95kg/month | ‚Ç¨22.50/kg | BTH-2024-005
                        <span class="chemical-type acid-dye">Acid Dye</span>
                        <span class="safety-level restricted">Restricted Use</span>
                        <span class="compliance-indicator reach-compliant">REACH</span>
                    </div>
                </div>
                <div class="chemical-actions">
                    <button class="btn btn-small btn-edit">üìù Edit</button>
                    <button class="btn btn-small btn-details">üëÅÔ∏è SDS</button>
                    <button class="btn btn-small btn-delete">üóëÔ∏è Delete</button>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="chart-container">
            <h3 class="chart-title">Chemical Type Distribution</h3>
            <canvas id="chemicalTypeChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h3 class="chart-title">Monthly Chemical Usage by Category</h3>
            <canvas id="usageChart" width="400" height="200"></canvas>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // Chemical Type Chart
        const chemicalTypeCtx = document.getElementById('chemicalTypeChart').getContext('2d');
        new Chart(chemicalTypeCtx, {
            type: 'doughnut',
            data: {
                labels: ['Reactive Dyes', 'Auxiliary Chemicals', 'Finishing Chemicals', 'Disperse Dyes', 'Acid Dyes'],
                datasets: [{
                    data: [35, 28, 18, 12, 7],
                    backgroundColor: ['#005530', '#666', '#D51635', '#02154e', '#f9ba00'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'bottom', labels: { padding: 20, usePointStyle: true } }
                }
            }
        });

        // Usage Chart
        const usageCtx = document.getElementById('usageChart').getContext('2d');
        new Chart(usageCtx, {
            type: 'bar',
            data: {
                labels: ['Dyes', 'Auxiliaries', 'Finishing', 'Pretreatment', 'Washing'],
                datasets: [{
                    label: 'Usage (tonnes)',
                    data: [3.2, 6.8, 1.5, 0.8, 0.2],
                    backgroundColor: ['#005530', '#666', '#D51635', '#02154e', '#f9ba00'],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: true, title: { display: true, text: 'Monthly Usage (tonnes)' } }
                }
            }
        });

        // Interactive functionality
        document.getElementById('chemical-notes').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                const value = this.value.trim();
                if (value) {
                    const tagsContainer = document.getElementById('compliance-tags');
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.innerHTML = `${value} <span class="remove">√ó</span>`;
                    tagsContainer.appendChild(tag);
                    tag.querySelector('.remove').addEventListener('click', function() { tag.remove(); });
                }
            }
        });

        // Remove existing tags
        document.querySelectorAll('.tag .remove').forEach(remove => {
            remove.addEventListener('click', function() { this.parentElement.remove(); });
        });

        // Auto-calc monthly cost (console info for now)
        document.getElementById('monthly-usage').addEventListener('blur', function() {
            const usage = parseFloat(this.value);
            const unitCost = parseFloat(document.getElementById('unit-cost').value);
            if (usage && unitCost) {
                const monthlyCost = (usage * unitCost).toFixed(2);
                console.log(`Monthly cost: ‚Ç¨${monthlyCost}`);
            }
        });

        // Basic form actions
        document.getElementById('add-btn').addEventListener('click', function() {
            alert('Chemical/Dye added successfully!');
        });
        document.getElementById('clear-btn').addEventListener('click', function() {
            document.querySelectorAll('input, textarea').forEach(el => el.value = '');
            document.querySelectorAll('select').forEach(el => el.selectedIndex = 0);
        });

        // Back-to-dashboard behavior synchronized with index.html
        function goHome(event){
            if(event){ event.preventDefault(); }
            try { window.close(); } catch(e) {}
            window.location.href = 'index.html';
            return false;
        }
    </script>
</body>
</html>
