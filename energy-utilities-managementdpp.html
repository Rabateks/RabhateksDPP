<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rabateks Energy/Utilities DPP - Digital Product Passport</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #ffffff;
            color: #333;
            line-height: 1.6;
        }

        .header {
            background-color: #ffffff;
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            width: 50px;
            height: 50px;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjUiIGN5PSIyNSIgcj0iMjUiIGZpbGw9IiMwMDU1MzAiLz4KPHN0eWxlPgoudGV4dCB7IGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogYm9sZDsgZmlsbDogd2hpdGU7IH0KPC9zdHlsZT4KPHR0ZXh0IHg9IjUwJSIgeT0iMjBweCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgY2xhc3M9InRleHQiPlJhYmF0ZWtzPC90ZXh0Pgo8dHRleHQgeD0iNTAlIiB5PSIzNXB4IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBjbGFzcz0idGV4dCIgZm9udC1zaXplPSI4cHgiPnJhYmF0ZWtzLmNvbTwvdHRleHQ+Cjwvc3ZnPg==');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 50%;
        }

        .header-text h1 {
            color: #005530;
            font-size: 24px;
            font-weight: 700;
        }

        .header-text .subtitle {
            color: #666;
            font-size: 14px;
        }

        .dpp-title {
            color: #f9ba00;
            font-weight: 600;
        }

        .back-to-dashboard {
            background-color: #005530;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .back-to-dashboard:hover {
            background-color: #004429;
            transform: translateY(-1px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .form-section {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
            font-size: 14px;
        }

        input, select, textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            background-color: #ffffff;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #005530;
            box-shadow: 0 0 0 3px rgba(0, 85, 48, 0.1);
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .tag {
            background-color: #005530;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tag .remove {
            cursor: pointer;
            font-weight: bold;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background-color: #005530;
            color: white;
        }

        .btn-primary:hover {
            background-color: #004429;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: #666;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #555;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
            text-align: center;
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
        }

        .energy-list {
            background-color: #ffffff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
        }

        .energy-item {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f9ba00;
            color: #333;
            margin-bottom: 8px;
            border-radius: 8px;
        }

        .energy-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .energy-details {
            font-size: 14px;
            color: #666;
        }

        .energy-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
        }

        .btn-edit {
            background-color: #02154e;
            color: white;
        }

        .btn-details {
            background-color: #666;
            color: white;
        }

        .btn-delete {
            background-color: #D51635;
            color: white;
        }

        .utility-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }

        .electricity {
            background-color: #f9ba00;
            color: #333;
        }

        .natural-gas {
            background-color: #02154e;
            color: white;
        }

        .water {
            background-color: #005530;
            color: white;
        }

        .steam {
            background-color: #666;
            color: white;
        }

        .compressed-air {
            background-color: #D51635;
            color: white;
        }

        .helper-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .chart-container {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border: 1px solid #f0f0f0;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .efficiency-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }

        .high-efficiency {
            background-color: #005530;
            color: white;
        }

        .moderate-efficiency {
            background-color: #f9ba00;
            color: #333;
        }

        .low-efficiency {
            background-color: #D51635;
            color: white;
        }

        .renewable-source {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 10px;
        }

        .solar {
            background-color: #f9ba00;
            color: #333;
        }

        .wind {
            background-color: #005530;
            color: white;
        }

        .grid-renewable {
            background-color: #02154e;
            color: white;
        }

        .fossil {
            background-color: #666;
            color: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .energy-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }

            .header-left {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <div class="logo"></div>
            <div class="header-text">
                <h1>Rabateks <span class="dpp-title">DPP</span> — Energy/Utilities Management</h1>
                <p class="subtitle">Digital Product Passport • Energy Monitoring • Water Management • Utility Optimization</p>
            </div>
        </div>
        <a href="index.html" class="back-to-dashboard">
            ← Back to Main Dashboard
        </a>
    </header>

    <div class="container">
        <!-- Statistics Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">⚡</div>
                <div class="stat-value" style="color: #f9ba00;">2,847</div>
                <div class="stat-label">MWh/Month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">💧</div>
                <div class="stat-value" style="color: #005530;">18,500</div>
                <div class="stat-label">m³ Water/Month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">🌱</div>
                <div class="stat-value" style="color: #005530;">34%</div>
                <div class="stat-label">Renewable Energy</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">💰</div>
                <div class="stat-value" style="color: #D51635;">€287K</div>
                <div class="stat-label">Monthly Utility Cost</div>
            </div>
        </div>

        <!-- Energy/Utilities Entry Form -->
        <div class="form-section">
            <h2 style="color: #333; margin-bottom: 20px;">Add New Energy/Utility Meter</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="meter-id">Meter ID</label>
                    <input type="text" id="meter-id" placeholder="e.g., MTR-ELE-001">
                </div>

                <div class="form-group">
                    <label for="facility-location">Facility Location</label>
                    <input type="text" id="facility-location" placeholder="e.g., Istanbul Main Factory">
                </div>

                <div class="form-group">
                    <label for="utility-type">Utility Type</label>
                    <select id="utility-type">
                        <option value="">Select Type</option>
                        <option value="Electricity">Electricity</option>
                        <option value="Natural Gas">Natural Gas</option>
                        <option value="Water">Water</option>
                        <option value="Steam">Steam</option>
                        <option value="Compressed Air">Compressed Air</option>
                        <option value="Chilled Water">Chilled Water</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="meter-location">Meter Location</label>
                    <input type="text" id="meter-location" placeholder="e.g., Dyeing Department - Main Panel">
                </div>

                <div class="form-group">
                    <label for="monthly-consumption">Monthly Consumption</label>
                    <input type="number" step="0.1" id="monthly-consumption" placeholder="e.g., 125.5">
                </div>

                <div class="form-group">
                    <label for="consumption-unit">Unit</label>
                    <select id="consumption-unit">
                        <option value="">Select Unit</option>
                        <option value="kWh">kWh (Electricity)</option>
                        <option value="m³">m³ (Gas/Water)</option>
                        <option value="tonnes">Tonnes (Steam)</option>
                        <option value="m³/min">m³/min (Compressed Air)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="unit-cost">Unit Cost (€)</label>
                    <input type="number" step="0.001" id="unit-cost" placeholder="e.g., 0.12">
                </div>

                <div class="form-group">
                    <label for="peak-demand">Peak Demand</label>
                    <input type="number" step="0.1" id="peak-demand" placeholder="e.g., 450.2">
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="supplier">Utility Supplier</label>
                    <input type="text" id="supplier" placeholder="e.g., BEDAŞ Istanbul">
                </div>

                <div class="form-group">
                    <label for="energy-source">Energy Source</label>
                    <select id="energy-source">
                        <option value="">Select Source</option>
                        <option value="Grid Mix">Grid Mix</option>
                        <option value="Solar">Solar Power</option>
                        <option value="Wind">Wind Power</option>
                        <option value="Natural Gas">Natural Gas</option>
                        <option value="Renewable Certificate">Renewable Certificate</option>
                        <option value="Cogeneration">Cogeneration</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="carbon-factor">Carbon Factor (kg CO₂/unit)</label>
                    <input type="number" step="0.001" id="carbon-factor" placeholder="e.g., 0.485">
                </div>

                <div class="form-group">
                    <label for="efficiency-rating">Efficiency Rating</label>
                    <select id="efficiency-rating">
                        <option value="">Select Rating</option>
                        <option value="High Efficiency">High Efficiency (>90%)</option>
                        <option value="Moderate Efficiency">Moderate Efficiency (70-90%)</option>
                        <option value="Low Efficiency">Low Efficiency (<70%)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="meter-reading-date">Last Reading Date</label>
                    <input type="date" id="meter-reading-date">
                </div>

                <div class="form-group">
                    <label for="maintenance-schedule">Maintenance Schedule</label>
                    <select id="maintenance-schedule">
                        <option value="Monthly">Monthly</option>
                        <option value="Quarterly">Quarterly</option>
                        <option value="Semi-Annual">Semi-Annual</option>
                        <option value="Annual">Annual</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="target-reduction">Target Reduction (%)</label>
                    <input type="number" step="0.1" id="target-reduction" placeholder="e.g., 15.5">
                </div>

                <div class="form-group">
                    <label for="monitoring-system">Monitoring System</label>
                    <select id="monitoring-system">
                        <option value="Manual Reading">Manual Reading</option>
                        <option value="Smart Meter">Smart Meter</option>
                        <option value="IoT Sensor">IoT Sensor</option>
                        <option value="SCADA System">SCADA System</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="utility-notes">Utility Notes & Optimization Plans</label>
                <textarea id="utility-notes" rows="3" placeholder="Energy efficiency initiatives, equipment upgrades, renewable energy plans, or operational notes..."></textarea>
            </div>

            <div class="tags-container" id="utility-tags">
                <div class="tag">Smart Monitoring <span class="remove">×</span></div>
                <div class="tag">Energy Star Rated <span class="remove">×</span></div>
                <div class="tag">Peak Shaving <span class="remove">×</span></div>
            </div>
            <div class="helper-text">Energy efficiency features and optimization programs</div>

            <div class="button-group">
                <button class="btn btn-primary">Add Energy/Utility Meter</button>
                <button class="btn btn-secondary">Clear Form</button>
            </div>
        </div>

        <!-- Energy/Utilities List -->
        <div class="energy-list">
            <div class="energy-item">
                <div class="energy-info">
                    <h3>MTR-ELE-001 • Istanbul Main Factory • Dyeing Department</h3>
                    <div class="energy-details">
                        Supplier: BEDAŞ Istanbul | 125,500 kWh/month | €0.12/kWh | 450kW Peak | 0.485 kg CO₂/kWh
                        <span class="utility-type electricity">Electricity</span>
                        <span class="efficiency-status moderate-efficiency">Moderate Efficiency</span>
                        <span class="renewable-source grid-renewable">Grid Mix</span>
                    </div>
                </div>
                <div class="energy-actions">
                    <button class="btn btn-small btn-edit">📝 Edit</button>
                    <button class="btn btn-small btn-details">👁️ Details</button>
                    <button class="btn btn-small btn-delete">🗑️ Delete</button>
                </div>
            </div>

            <div class="energy-item">
                <div class="energy-info">
                    <h3>MTR-GAS-001 • Istanbul Main Factory • Boiler Room</h3>
                    <div class="energy-details">
                        Supplier: BOTAŞ Turkey | 8,750 m³/month | €0.45/m³ | 180 m³/h Peak | 1.98 kg CO₂/m³
                        <span class="utility-type natural-gas">Natural Gas</span>
                        <span class="efficiency-status high-efficiency">High Efficiency</span>
                        <span class="renewable-source fossil">Fossil Fuel</span>
                    </div>
                </div>
                <div class="energy-actions">
                    <button class="btn btn-small btn-edit">📝 Edit</button>
                    <button class="btn btn-small btn-details">👁️ Details</button>
                    <button class="btn btn-small btn-delete">🗑️ Delete</button>
                </div>
            </div>

            <div class="energy-item">
                <div class="energy-info">
                    <h3>MTR-WAT-001 • Istanbul Main Factory • Process Water</h3>
                    <div class="energy-details">
                        Supplier: İSKİ Istanbul | 12,500 m³/month | €1.85/m³ | 25 m³/h Peak | 0.002 kg CO₂/m³
                        <span class="utility-type water">Water</span>
                        <span class="efficiency-status moderate-efficiency">Moderate Efficiency</span>
                        <span class="renewable-source grid-renewable">Municipal Supply</span>
                    </div>
                </div>
                <div class="energy-actions">
                    <button class="btn btn-small btn-edit">📝 Edit</button>
                    <button class="btn btn-small btn-details">👁️ Details</button>
                    <button class="btn btn-small btn-delete">🗑️ Delete</button>
                </div>
            </div>

            <div class="energy-item">
                <div class="energy-info">
                    <h3>MTR-STM-001 • Istanbul Main Factory • Steam Distribution</h3>
                    <div class="energy-details">
                        Source: On-site Boiler | 450 tonnes/month | €45.00/tonne | 2.5 t/h Peak | 280 kg CO₂/tonne
                        <span class="utility-type steam">Steam</span>
                        <span class="efficiency-status high-efficiency">High Efficiency</span>
                        <span class="renewable-source fossil">Natural Gas Fired</span>
                    </div>
                </div>
                <div class="energy-actions">
                    <button class="btn btn-small btn-edit">📝 Edit</button>
                    <button class="btn btn-small btn-details">👁️ Details</button>
                    <button class="btn btn-small btn-delete">🗑️ Delete</button>
                </div>
            </div>

            <div class="energy-item">
                <div class="energy-info">
                    <h3>MTR-SOL-001 • Istanbul Main Factory • Rooftop Solar</h3>
                    <div class="energy-details">
                        Source: Solar PV System | 28,500 kWh/month | €0.00/kWh | 150kW Peak | 0.000 kg CO₂/kWh
                        <span class="utility-type electricity">Electricity</span>
                        <span class="efficiency-status high-efficiency">High Efficiency</span>
                        <span class="renewable-source solar">Solar Power</span>
                    </div>
                </div>
                <div class="energy-actions">
                    <button class="btn btn-small btn-edit">📝 Edit</button>
                    <button class="btn btn-small btn-details">👁️ Details</button>
                    <button class="btn btn-small btn-delete">🗑️ Delete</button>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="chart-container">
            <h3 class="chart-title">Utility Consumption Distribution</h3>
            <canvas id="utilityChart" width="400" height="200"></canvas>
        </div>

        <div class="chart-container">
            <h3 class="chart-title">Monthly Energy Consumption Trends</h3>
            <canvas id="trendChart" width="400" height="200"></canvas>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        // Utility Distribution Chart
        const utilityCtx = document.getElementById('utilityChart').getContext('2d');
        new Chart(utilityCtx, {
            type: 'doughnut',
            data: {
                labels: ['Electricity', 'Natural Gas', 'Water', 'Steam', 'Compressed Air'],
                datasets: [{
                    data: [58, 22, 12, 6, 2],
                    backgroundColor: ['#f9ba00', '#02154e', '#005530', '#666', '#D51635'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 20,
                            usePointStyle: true
                        }
                    }
                }
            }
        });

        // Energy Trend Chart
        const trendCtx = document.getElementById('trendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [
                    {
                        label: 'Total Energy (MWh)',
                        data: [2650, 2780, 2845, 2920, 2847, 2785],
                        borderColor: '#f9ba00',
                        backgroundColor: 'rgba(249, 186, 0, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Renewable Energy (MWh)',
                        data: [850, 920, 980, 1050, 970, 945],
                        borderColor: '#005530',
                        backgroundColor: 'rgba(0, 85, 48, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Water Usage (thousands m³)',
                        data: [16.5, 17.2, 18.1, 19.0, 18.5, 18.2],
                        borderColor: '#02154e',
                        backgroundColor: 'rgba(2, 21, 78, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Energy (MWh)'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'Water (thousands m³)'
                        },
                        grid: {
                            drawOnChartArea: false,
                        },
                    }
                }
            }
        });

        // Interactive functionality
        document.getElementById('utility-notes').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                const value = this.value.trim();
                if (value) {
                    const tagsContainer = document.getElementById('utility-tags');
                    const tag = document.createElement('div');
                    tag.className = 'tag';
                    tag.innerHTML = `${value} <span class="remove">×</span>`;
                    tagsContainer.appendChild(tag);
                    
                    tag.querySelector('.remove').addEventListener('click', function() {
                        tag.remove();
                    });
                }
            }
        });

        // Remove existing tags
        document.querySelectorAll('.tag .remove').forEach(remove => {
            remove.addEventListener('click', function() {
                this.parentElement.remove();
            });
        });

        // Auto-calculate monthly cost
        document.getElementById('monthly-consumption').addEventListener('blur', function() {
            const consumption = parseFloat(this.value);
            const unitCost = parseFloat(document.getElementById('unit-cost').value);
            
            if (consumption && unitCost) {
                const monthlyCost = (consumption * unitCost).toFixed(2);
                console.log(`Monthly cost: €${monthlyCost}`);
            }
        });

        // Auto-set carbon factor based on utility type
        document.getElementById('utility-type').addEventListener('change', function() {
            const carbonFactorInput = document.getElementById('carbon-factor');
            
            switch(this.value) {
                case 'Electricity': carbonFactorInput.value = '0.485'; break;
                case 'Natural Gas': carbonFactorInput.value = '1.980'; break;
                case 'Water': carbonFactorInput.value = '0.002'; break;
                case 'Steam': carbonFactorInput.value = '0.280'; break;
                case 'Compressed Air': carbonFactorInput.value = '0.095'; break;
                default: carbonFactorInput.value = '';
            }
        });

        // Form validation and submission
        document.querySelector('.btn-primary').addEventListener('click', function() {
            // Add form validation and submission logic here
            alert('Energy/Utility meter added successfully!');
        });
    </script>
</body>
</html>